<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header.html :: head"/>
<head>
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>

<body class="color-body">
<div class="container px-5">
  <div class="row gx-5 justify-content-center">
    <div class="col-lg-8 py-5">
      <form th:method="post" class="join-form form-group"> <!--th:action=""-->
        <h2 onclick="location.href='/'">로고이미지(홈으로)</h2>
        <br/>
        <div>
          <input type="text" class="w-75 login-input" placeholder="아이디" required>
        </div>
        <br/>
        <div>
          <input id="pw" type="password" class="w-75 login-input" placeholder="비밀번호는 ~~로 사용해야 합니다" required>
        </div>
        <br/>
        <div>
          <input id="pw2" type="password" class="w-75 login-input" placeholder="비밀번호 확인" onchange="check_pw()" required>
        </div>
        <div style="margin-top: 5px">
          <div id="alert-success" hidden>비밀번호가 일치합니다.</div>
          <div id="alert-danger" hidden>비밀번호가 일치하지 않습니다.</div>
        </div>
        <br/>
        <div>
          <input type="text" class="w-75 login-input" placeholder="닉네임" required>
        </div>
        <br/>
        <div align="center">
          <div class="w-75 d-flex">
            <input type="text" class="join-input" placeholder="email" required>
            <button type="button" class="btn send-btn" onclick="send_email()">인증번호 전송</button>
          </div>
          <div id="check-email" style="margin-top: 20px" hidden>
            <input type="text" class="join-input" placeholder="인증번호" required>
            <button type="button" class="btn btn1">인증</button>
          </div>
        </div>
        <br/>
        <div align="center">
          <div class="w-75 d-flex">
            <input type="text" class="join-input" placeholder="전화 번호" required>
            <button type="button" class="btn send-btn" onclick="send_phone()">인증번호 전송</button>
          </div>
          <div id="check-phone" style="margin-top: 20px" hidden>
            <input type="text" class="join-input" placeholder="인증번호" required>
            <button type="button" class="btn btn1">인증</button>
          </div>
        </div>
        <br/>
        <div>
          <button id="join-btn" type="submit" class="btn btn1" disabled>회원가입</button>
          <br/><br/>
          <div class="bottom-text">이미 계정이 있으신가요?&nbsp;&nbsp;<a href="/users/login">로그인</a></div>
        </div>
    </div>
  </div>
</div>


<script th:inline="javascript">

  function send_email() {
    alert("이메일로 인증번호를 전송했습니다")
    document.getElementById("check-email").removeAttribute("hidden")
    document.getElementById("check-email").className = "w-75 d-flex"
  }
  function send_phone() {
    alert("핸드폰으로 인증번호를 전송했습니다")
    document.getElementById("check-phone").removeAttribute("hidden")
    document.getElementById("check-phone").className = "w-75 d-flex"
  }
  function check_pw() {
    if(document.getElementById('pw').value != '' && document.getElementById('pw2').value!= ''){
      if(document.getElementById('pw').value == document.getElementById('pw2').value){
        document.getElementById('alert-success').removeAttribute("hidden")
        document.getElementById('alert-danger').setAttribute("hidden", "true")
        document.getElementById('join-btn').removeAttribute("disabled")
      }
      else{
        document.getElementById('alert-danger').removeAttribute("hidden")
        document.getElementById('alert-success').setAttribute("hidden", "true")
        document.getElementById('join-btn').setAttribute("disabled", "true")
      }
    }
  }

  /* 이메일, 전화번호 인증 => 구현 필요
  $(function(){
    sendMail();
  });
  function sendMail() {
    var isCertification = false;
    var key1 = "";
    $('#sendMail').on('click', function () {// 메일 입력 유효성 검사
      var email = $(".email").val(); //사용자의 이메일 입력값.
      console.log(email);

      if (email == "") {
        alert("메일 주소가 입력되지 않았습니다.");
      } else {

        $.ajax({
          type: 'post',
          url: '/user/CheckMail',
          data: {
            email: email
          },
          success: function (key) {
            console.log(key);
            key1 = key;
            console.log(key1);
          }
        });
        console.log(key1);
        alert("이메일을 확인하시기 바랍니다.");
        $(".compare-email").css("display", "block");
        $(".compare-text").css("display", "block");
      }
    });
  }

  $(function(){
    sendPhone();

  });
  function sendPhone() {
    var isCertification = false;
    var key1 = "";
    $('#sendPhone').on('click', function () {// 메일 입력 유효성 검사
      var phone = $(".phone").val(); //사용자의 이메일 입력값.
      console.log(phone);

      if (phone == "") {
        alert("핸드폰 번호가 입력되지 않았습니다.");
      } else {

        $.ajax({
          type: 'post',
          url: '/user/CheckPhone',
          data: {
            phone: phone
          },
          success: function (key) {
            console.log(key);
            key1 = key;
            console.log(key1);
          }
        });
        console.log(key1);
        alert("메시지를 확인하시기 바랍니다.");
        $(".compare-phone").css("display", "block");
        $(".phone-text").css("display", "block");
      }
    });
  }*/

</script>
</body>
</html>